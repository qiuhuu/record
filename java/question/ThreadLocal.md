# 1、ThreadLocal获取到历史数据

​	场景：tomcat部署应用，请求进来时设置一个线程变量，在其他请求中获取线程变量，有一定几率获取到以前的线程变量

​	问题：为什么会获取到以前线程的变量？

​	原因：因为本次部署是通过tomcat部署，tomcat默认使用线程池，所以一个线程的生命周期不能对等于一个请求的生命周期，线程池中的线程是可以被复用的。

​	解决方案：

1. 保证每次都用新的值覆盖线程变量；
2. 保证在每个请求结束后清空线程变量;
3. 可以了解TransmittableThreadLocal和InheritableThreadLocal。